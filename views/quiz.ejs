<link rel="stylesheet" href="/css/style.css">

<div class="quiz-container">
  <div class="container">
    <div class="quiz-header">
      <h1>Descubra Seu Perfil de Pele</h1>
      <p>Responda 3 perguntas simples para receber recomendações personalizadas</p>
    </div>

    <form id="quizForm" class="quiz-form">
      <!-- Pergunta 1: Tipo de Pele -->
      <div class="quiz-question fade-in-up">
        <h2>1. Qual é o seu tipo de pele?</h2>
        <div class="options">
          <label class="option">
            <input type="radio" name="skinType" value="oily" required>
            <span class="option-content">
              <strong>Oleosa</strong>
              <small>Brilho excessivo, poros dilatados</small>
            </span>
          </label>
          <label class="option">
            <input type="radio" name="skinType" value="dry" required>
            <span class="option-content">
              <strong>Seca</strong>
              <small>Ressecamento, descamação</small>
            </span>
          </label>
          <label class="option">
            <input type="radio" name="skinType" value="combination" required>
            <span class="option-content">
              <strong>Mista</strong>
              <small>Oleosa em algumas áreas, seca em outras</small>
            </span>
          </label>
          <label class="option">
            <input type="radio" name="skinType" value="sensitive" required>
            <span class="option-content">
              <strong>Sensível</strong>
              <small>Irritação fácil, vermelhidão</small>
            </span>
          </label>
        </div>
      </div>

      <!-- Pergunta 2: Preocupações -->
      <div class="quiz-question fade-in-up" style="animation-delay: 100ms;">
        <h2>2. Quais são suas principais preocupações? (Selecione uma ou mais)</h2>
        <div class="options">
          <label class="option">
            <input type="checkbox" name="concerns" value="acne">
            <span class="option-content">
              <strong>Acne</strong>
              <small>Espinhas e inflamação</small>
            </span>
          </label>
          <label class="option">
            <input type="checkbox" name="concerns" value="spots">
            <span class="option-content">
              <strong>Manchas</strong>
              <small>Hiperpigmentação</small>
            </span>
          </label>
          <label class="option">
            <input type="checkbox" name="concerns" value="wrinkles">
            <span class="option-content">
              <strong>Rugas</strong>
              <small>Linhas de expressão</small>
            </span>
          </label>
          <label class="option">
            <input type="checkbox" name="concerns" value="dark-circles">
            <span class="option-content">
              <strong>Olheiras</strong>
              <small>Escurecimento sob os olhos</small>
            </span>
          </label>
        </div>
      </div>

      <!-- Pergunta 3: Sensibilidade -->
      <div class="quiz-question fade-in-up" style="animation-delay: 200ms;">
        <h2>3. Você tem alguma sensibilidade especial?</h2>
        <div class="options">
          <label class="option">
            <input type="radio" name="sensitivity" value="none" required>
            <span class="option-content">
              <strong>Nenhuma</strong>
              <small>Pele resistente</small>
            </span>
          </label>
          <label class="option">
            <input type="radio" name="sensitivity" value="mild" required>
            <span class="option-content">
              <strong>Leve</strong>
              <small>Ocasionalmente sensível</small>
            </span>
          </label>
          <label class="option">
            <input type="radio" name="sensitivity" value="high" required>
            <span class="option-content">
              <strong>Alta</strong>
              <small>Muito sensível a produtos</small>
            </span>
          </label>
        </div>
      </div>

      <button type="submit" class="btn btn-primary btn-large fade-in-up" style="animation-delay: 300ms;">
        Ver Recomendações
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    </form>
  </div>
</div>

<script>
  document.getElementById('quizForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(e.target);
    const concerns = formData.getAll('concerns');

    const data = {
      skinType: formData.get('skinType'),
      concerns: concerns.length > 0 ? concerns : ['none'],
      sensitivity: formData.get('sensitivity'),
    };

    try {
      const response = await fetch('/quiz', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      if (response.ok) {
        window.location.href = '/recommendations';
      }
    } catch (error) {
      console.error('Erro:', error);
    }
  });
</script>
